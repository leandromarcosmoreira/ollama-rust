   Compiling ollama v0.5.0 (/home/lemoreira/git/integracoes/ollama)
warning: variable `current_pos` is assigned to, but never used
  --> src/app/runner/mod.rs:54:13
   |
54 |         let mut current_pos = tokens.len();
   |             ^^^^^^^^^^^^^^^
   |
   = note: consider using `_current_pos` instead
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: value assigned to `current_pos` is never read
  --> src/app/runner/mod.rs:67:13
   |
67 |             current_pos += 1;
   |             ^^^^^^^^^^^^^^^^
   |
   = help: maybe it is overwritten before being read?
   = note: `#[warn(unused_assignments)]` (part of `#[warn(unused)]`) on by default

warning: field `scores` is never read
  --> src/core/tokenizer/sentencepiece.rs:10:5
   |
 6 | pub struct SentencePieceTokenizer {
   |            ---------------------- field in this struct
...
10 |     scores: HashMap<TokenId, f32>,
   |     ^^^^^^
   |
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: fields `layer_count`, `head_count`, and `head_dim` are never read
  --> src/core/cache/mod.rs:8:5
   |
 7 | pub struct CausalKVCache {
   |            ------------- fields in this struct
 8 |     layer_count: usize,
   |     ^^^^^^^^^^^
 9 |     head_count: usize,
   |     ^^^^^^^^^^
10 |     head_dim: usize,
   |     ^^^^^^^^

warning: field `backend` is never read
 --> src/infra/ggml/context.rs:6:5
  |
5 | pub struct GgmlContext {
  |            ----------- field in this struct
6 |     backend: GgmlBackend,
  |     ^^^^^^^

warning: method `as_f64` is never used
   --> src/gguf.rs:420:8
    |
390 | impl Value {
    | ---------- method in this implementation
...
420 |     fn as_f64(&self) -> Option<f64> {
    |        ^^^^^^

warning: stripping a prefix manually
   --> src/core/tokenizer/wordpiece.rs:118:43
    |
118 | ...   current_word.push_str(&token[2..]);
    |                             ^^^^^^^^^^^
    |
note: the prefix was tested here
   --> src/core/tokenizer/wordpiece.rs:117:17
    |
117 |                 if token.starts_with("##") {
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#manual_strip
    = note: `#[warn(clippy::manual_strip)]` on by default
help: try using the `strip_prefix` method
    |
117 ~                 if let Some(<stripped>) = token.strip_prefix("##") {
118 ~                     current_word.push_str(<stripped>);
    |

warning: very complex type used. Consider factoring parts into `type` definitions
  --> src/app/events/mod.rs:31:15
   |
31 | ...s: RwLock<HashMap<HandlerId, (String, Arc<dyn EventHandler>)>>,
   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#type_complexity
   = note: `#[warn(clippy::type_complexity)]` on by default

warning: unnecessary operation
   --> src/utils/mod.rs:193:21
    |
193 |                     m.start() > last_end;
    |                     ^^^^^^^^^^^^^^^^^^^^^ help: statement can be reduced to: `m.start(); last_end;`
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#unnecessary_operation
    = note: `#[warn(clippy::unnecessary_operation)]` on by default

warning: unused comparison that must be used
   --> src/utils/mod.rs:193:21
    |
193 |                     m.start() > last_end;
    |                     ^^^^^^^^^^^^^^^^^^^^ the comparison produces a value
    |
    = note: `#[warn(unused_must_use)]` (part of `#[warn(unused)]`) on by default
help: use `let _ = ...` to ignore the resulting value
    |
193 |                     let _ = m.start() > last_end;
    |                     +++++++

warning: `ollama` (lib) generated 10 warnings (run `cargo clippy --fix --lib -p ollama` to apply 1 suggestion)
warning: `ollama` (lib test) generated 10 warnings (10 duplicates)
warning: field `vocab_scores` is never read
   --> src/bin/runner.rs:139:5
    |
137 | struct GgufTokenizer {
    |        ------------- field in this struct
138 |     vocab: Vec<String>,
139 |     vocab_scores: Vec<f32>,
    |     ^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: method `decode` is never used
   --> src/bin/runner.rs:187:8
    |
144 | impl GgufTokenizer {
    | ------------------ method in this implementation
...
187 |     fn decode(&self, tokens: &[i32]) -> Stri...
    |        ^^^^^^

warning: clamp-like pattern without using clamp function
  --> src/bin/runner.rs:99:30
   |
99 | ...kens = n_predict.min(50).max(1) as usize;
   |           ^^^^^^^^^^^^^^^^^^^^^^^^ help: replace with clamp: `n_predict.clamp(1, 50)`
   |
   = note: clamp will panic if max < min
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#manual_clamp
   = note: `#[warn(clippy::manual_clamp)]` on by default

warning: you seem to use `.enumerate()` and immediately discard the index
   --> src/bin/runner.rs:203:42
    |
203 | ... tokens.iter().enumerate() {
    |                  ^^^^^^^^^^^^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#unused_enumerate_index
    = note: `#[warn(clippy::unused_enumerate_index)]` on by default
help: remove the `.enumerate()` call
    |
203 -         for (_i, &token) in tokens.iter().enumerate() {
203 +         for &token in tokens.iter() {
    |

warning: `ollama` (bin "runner") generated 4 warnings (run `cargo clippy --fix --bin "runner" -p ollama` to apply 1 suggestion)
warning: `ollama` (bin "runner" test) generated 4 warnings (4 duplicates)
warning: struct `Time` is never constructed
 --> src/api/types.rs:5:12
  |
5 | pub struct Time {
  |            ^^^^
  |
  = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: associated functions `new` and `from_timestamp` are never used
  --> src/api/types.rs:11:12
   |
10 | impl Time {
   | --------- associated functions in this implementation
11 |     pub fn new() -> Self {
   |            ^^^
...
15 |     pub fn from_timestamp(ts: i64) -> Self {
   |            ^^^^^^^^^^^^^^

warning: struct `ToolFunction` is never constructed
  --> src/api/types.rs:27:12
   |
27 | pub struct ToolFunction {
   |            ^^^^^^^^^^^^

warning: struct `ToolCall` is never constructed
  --> src/api/types.rs:35:12
   |
35 | pub struct ToolCall {
   |            ^^^^^^^^

warning: struct `File` is never constructed
  --> src/api/types.rs:42:12
   |
42 | pub struct File {
   |            ^^^^

warning: struct `Attachment` is never constructed
  --> src/api/types.rs:48:12
   |
48 | pub struct Attachment {
   |            ^^^^^^^^^^

warning: struct `Message` is never constructed
  --> src/api/types.rs:55:12
   |
55 | pub struct Message {
   |            ^^^^^^^

warning: struct `Chat` is never constructed
  --> src/api/types.rs:85:12
   |
85 | pub struct Chat {
   |            ^^^^

warning: struct `ChatInfo` is never constructed
  --> src/api/types.rs:96:12
   |
96 | pub struct ChatInfo {
   |            ^^^^^^^^

warning: struct `ChatsResponse` is never constructed
   --> src/api/types.rs:105:12
    |
105 | pub struct ChatsResponse {
    |            ^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:111:12
    |
110 | impl ChatsResponse {
    | ------------------ associated function in this implementation
111 |     pub fn new() -> Self {
    |            ^^^

warning: struct `ChatResponse` is never constructed
   --> src/api/types.rs:125:12
    |
125 | pub struct ChatResponse {
    |            ^^^^^^^^^^^^

warning: struct `Model` is never constructed
   --> src/api/types.rs:130:12
    |
130 | pub struct Model {
    |            ^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:140:12
    |
139 | impl Model {
    | ---------- associated function in this implementation
140 |     pub fn new(model: impl Into<String>) -> ...
    |            ^^^

warning: struct `ModelsResponse` is never constructed
   --> src/api/types.rs:150:12
    |
150 | pub struct ModelsResponse {
    |            ^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:156:12
    |
155 | impl ModelsResponse {
    | ------------------- associated function in this implementation
156 |     pub fn new() -> Self {
    |            ^^^

warning: struct `InferenceCompute` is never constructed
   --> src/api/types.rs:168:12
    |
168 | pub struct InferenceCompute {
    |            ^^^^^^^^^^^^^^^^

warning: struct `InferenceComputeResponse` is never constructed
   --> src/api/types.rs:178:12
    |
178 | pub struct InferenceComputeResponse {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:186:12
    |
185 | impl InferenceComputeResponse {
    | ----------------------------- associated function in this implementation
186 |     pub fn new() -> Self {
    |            ^^^

warning: struct `ModelCapabilitiesResponse` is never constructed
   --> src/api/types.rs:201:12
    |
201 | pub struct ModelCapabilitiesResponse {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: associated functions `new` and `with_capabilities` are never used
   --> src/api/types.rs:207:12
    |
206 | impl ModelCapabilitiesResponse {
    | ------------------------------ associated functions in this implementation
207 |     pub fn new() -> Self {
    |            ^^^
...
213 |     pub fn with_capabilities(capabilities: V...
    |            ^^^^^^^^^^^^^^^^^

warning: enum `ChatEventName` is never used
   --> src/api/types.rs:226:10
    |
226 | pub enum ChatEventName {
    |          ^^^^^^^^^^^^^

warning: struct `ChatEvent` is never constructed
   --> src/api/types.rs:239:12
    |
239 | pub struct ChatEvent {
    |            ^^^^^^^^^

warning: struct `DownloadEvent` is never constructed
   --> src/api/types.rs:267:12
    |
267 | pub struct DownloadEvent {
    |            ^^^^^^^^^^^^^

warning: struct `ErrorEvent` is never constructed
   --> src/api/types.rs:276:12
    |
276 | pub struct ErrorEvent {
    |            ^^^^^^^^^^

warning: struct `Settings` is never constructed
   --> src/api/types.rs:287:12
    |
287 | pub struct Settings {
    |            ^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:319:12
    |
318 | impl Settings {
    | ------------- associated function in this implementation
319 |     pub fn new() -> Self {
    |            ^^^

warning: struct `SettingsResponse` is never constructed
   --> src/api/types.rs:346:12
    |
346 | pub struct SettingsResponse {
    |            ^^^^^^^^^^^^^^^^

warning: struct `HealthResponse` is never constructed
   --> src/api/types.rs:351:12
    |
351 | pub struct HealthResponse {
    |            ^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:356:12
    |
355 | impl HealthResponse {
    | ------------------- associated function in this implementation
356 |     pub fn new(healthy: bool) -> Self {
    |            ^^^

warning: struct `User` is never constructed
   --> src/api/types.rs:362:12
    |
362 | pub struct User {
    |            ^^^^

warning: struct `ChatRequest` is never constructed
   --> src/api/types.rs:379:12
    |
379 | pub struct ChatRequest {
    |            ^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:397:12
    |
396 | impl ChatRequest {
    | ---------------- associated function in this implementation
397 |     pub fn new(model: impl Into<String>, pro...
    |            ^^^

warning: struct `Error` is never constructed
   --> src/api/types.rs:412:12
    |
412 | pub struct Error {
    |            ^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:417:12
    |
416 | impl Error {
    | ---------- associated function in this implementation
417 |     pub fn new(error: impl Into<String>) -> ...
    |            ^^^

warning: struct `ModelUpstreamResponse` is never constructed
   --> src/api/types.rs:425:12
    |
425 | pub struct ModelUpstreamResponse {
    |            ^^^^^^^^^^^^^^^^^^^^^

warning: struct `Page` is never constructed
   --> src/api/types.rs:434:12
    |
434 | pub struct Page {
    |            ^^^^

warning: struct `BrowserStateData` is never constructed
   --> src/api/types.rs:447:12
    |
447 | pub struct BrowserStateData {
    |            ^^^^^^^^^^^^^^^^

warning: struct `CloudStatusResponse` is never constructed
   --> src/api/types.rs:458:12
    |
458 | pub struct CloudStatusResponse {
    |            ^^^^^^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:464:12
    |
463 | impl CloudStatusResponse {
    | ------------------------ associated function in this implementation
464 |     pub fn new(disabled: bool, source: impl ...
    |            ^^^

warning: struct `SettingsState` is never constructed
   --> src/api/types.rs:474:12
    |
474 | pub struct SettingsState {
    |            ^^^^^^^^^^^^^

warning: associated functions `new` and `from_settings` are never used
   --> src/api/types.rs:497:12
    |
496 | impl SettingsState {
    | ------------------ associated functions in this implementation
497 |     pub fn new() -> Self {
    |            ^^^
...
501 |     pub fn from_settings(settings: &Settings...
    |            ^^^^^^^^^^^^^

warning: struct `SettingsUpdate` is never constructed
   --> src/api/types.rs:515:12
    |
515 | pub struct SettingsUpdate {
    |            ^^^^^^^^^^^^^^

warning: struct `BatcherConfig` is never constructed
   --> src/api/types.rs:532:12
    |
532 | pub struct BatcherConfig {
    |            ^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:549:12
    |
548 | impl BatcherConfig {
    | ------------------ associated function in this implementation
549 |     pub fn new() -> Self {
    |            ^^^

warning: struct `ImageData` is never constructed
   --> src/api/types.rs:556:12
    |
556 | pub struct ImageData {
    |            ^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:563:12
    |
562 | impl ImageData {
    | -------------- associated function in this implementation
563 |     pub fn new(filename: impl Into<String>, ...
    |            ^^^

warning: struct `MenuItem` is never constructed
   --> src/api/types.rs:574:12
    |
574 | pub struct MenuItem {
    |            ^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:583:12
    |
582 | impl MenuItem {
    | ------------- associated function in this implementation
583 |     pub fn new(label: impl Into<String>) -> ...
    |            ^^^

warning: struct `UseMessageAutoscrollOptions` is never constructed
   --> src/api/types.rs:594:12
    |
594 | pub struct UseMessageAutoscrollOptions {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `MessageAutoscrollBehavior` is never constructed
   --> src/api/types.rs:603:12
    |
603 | pub struct MessageAutoscrollBehavior {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `ModelConfig` is never constructed
  --> src/models.rs:93:12
   |
93 | pub struct ModelConfig {
   |            ^^^^^^^^^^^

warning: fields `client`, `num_threads`, and `chunk_size` are never read
  --> src/downloader.rs:13:5
   |
12 | pub struct Downloader {
   |            ---------- fields in this struct
13 |     client: Client,
   |     ^^^^^^
14 |     num_threads: usize,
   |     ^^^^^^^^^^^
15 |     chunk_size: u64,
   |     ^^^^^^^^^^

warning: multiple associated items are never used
   --> src/downloader.rs:20:12
    |
 19 | impl Downloader {
    | --------------- associated items in this implementation
 20 |     pub fn new(num_threads: usize, chunk_siz...
    |            ^^^
...
 35 |     fn aria2c_available() -> bool {
    |        ^^^^^^^^^^^^^^^^
...
 43 |     pub async fn download<F>(
    |                  ^^^^^^^^
...
 60 |     async fn download_with_aria2c<F>(
    |              ^^^^^^^^^^^^^^^^^^^^
...
110 |     async fn get_file_size(&self, url: &str)...
    |              ^^^^^^^^^^^^^
...
123 |     async fn download_native<F>(
    |              ^^^^^^^^^^^^^^^
...
247 |     async fn verify_digest(&self, path: &Pat...
    |              ^^^^^^^^^^^^^

warning: field `stop` is never read
  --> src/llama.rs:18:9
   |
 8 | pub struct InferenceOptions {
   |            ---------------- field in this struct
...
18 |     pub stop: Vec<String>,
   |         ^^^^
   |
   = note: `InferenceOptions` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis

warning: method `unload` is never used
   --> src/llama.rs:137:12
    |
 58 | impl LlamaEngine {
    | ---------------- method in this implementation
...
137 |     pub fn unload(&mut self) {
    |            ^^^^^^

warning: methods `remove` and `list_running` are never used
   --> src/llama.rs:171:12
    |
147 | impl LlamaEngineCache {
    | --------------------- methods in this implementation
...
171 |     pub fn remove(&mut self, name: &str) {
    |            ^^^^^^
...
175 |     pub fn list_running(&self) -> Vec<String> {
    |            ^^^^^^^^^^^^

warning: enum `ParserState` is never used
 --> src/harmony/mod.rs:4:10
  |
4 | pub enum ParserState {
  |          ^^^^^^^^^^^

warning: struct `Header` is never constructed
  --> src/harmony/mod.rs:21:12
   |
21 | pub struct Header {
   |            ^^^^^^

warning: enum `Event` is never used
  --> src/harmony/mod.rs:28:10
   |
28 | pub enum Event {
   |          ^^^^^

warning: struct `Parser` is never constructed
  --> src/harmony/mod.rs:35:12
   |
35 | pub struct Parser {
   |            ^^^^^^

warning: associated items `new`, `add_implicit_start`, `add_content`, `eat`, `parse_header`, and `overlap` are never used
   --> src/harmony/mod.rs:44:12
    |
 43 | impl Parser {
    | ----------- associated items in this implementation
 44 |     pub fn new() -> Self {
    |            ^^^
...
 54 |     pub fn add_implicit_start(&mut self) {
    |            ^^^^^^^^^^^^^^^^^^
...
 58 |     pub fn add_content(&mut self, content: &...
    |            ^^^^^^^^^^^
...
 73 |     fn eat(&mut self) -> (Vec<Event>, bool) {
    |        ^^^
...
131 |     fn parse_header(&self, raw: &str) -> Hea...
    |        ^^^^^^^^^^^^
...
183 |     fn overlap(s: &str, delim: &str) -> usize {
    |        ^^^^^^^

warning: struct `FunctionNameMap` is never constructed
   --> src/harmony/mod.rs:200:12
    |
200 | pub struct FunctionNameMap {
    |            ^^^^^^^^^^^^^^^

warning: associated items `new`, `convert_and_add`, `original_from_converted`, `convert_to_valid_chars`, and `derive_name` are never used
   --> src/harmony/mod.rs:206:12
    |
205 | impl FunctionNameMap {
    | -------------------- associated items in this implementation
206 |     pub fn new() -> Self {
    |            ^^^
...
213 |     pub fn convert_and_add(&mut self, user_f...
    |            ^^^^^^^^^^^^^^^
...
220 |     pub fn original_from_converted(&self, ha...
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
226 |     fn convert_to_valid_chars(&self, name: &...
    |        ^^^^^^^^^^^^^^^^^^^^^^
...
247 |     fn derive_name(&self, user_function_name...
    |        ^^^^^^^^^^^

warning: module has the same name as its containing module
   --> src/runner/mod.rs:1:1
    |
  1 | / pub mod runner {
  2 | |     use anyhow::Result;
  3 | |     use std::collections::HashMap;
  4 | |     use serde::{Deserialize, Serialize};
...   |
346 | | }
    | |_^
    |
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#module_inception
    = note: `#[warn(clippy::module_inception)]` on by default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> src/runner/mod.rs:184:13
    |
184 | ...   inf_opts.temperature = self.options.temperature;
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llama::InferenceOptions { temperature: self.options.temperature, top_p: self.options.top_p, top_k: self.options.top_k, repeat_penalty: self.options.repeat_penalty, repeat_last_n: self.options.repeat_last_n, seed: self.options.seed as u32, n_ctx: self.options.context_size as u32, n_threads: self.options.threads as u32, ..Default::default() }` and removing relevant reassignments
   --> src/runner/mod.rs:183:13
    |
183 | ...   let mut inf_opts = crate::llama::InferenceOptions::default();
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#field_reassign_with_default
    = note: `#[warn(clippy::field_reassign_with_default)]` on by default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> src/server/mod.rs:236:13
    |
236 | ...   inf_opts.temperature = opts.temperature;
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llama::InferenceOptions { temperature: opts.temperature, top_p: opts.top_p, top_k: opts.top_k, repeat_penalty: opts.repeat_penalty, repeat_last_n: opts.repeat_last_n, seed: opts.seed as u32, n_ctx: opts.context_size as u32, n_threads: opts.threads as u32, ..Default::default() }` and removing relevant reassignments
   --> src/server/mod.rs:235:13
    |
235 | ...   let mut inf_opts = crate::llama::InferenceOptions::default();
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> src/server/mod.rs:342:13
    |
342 | ...   inf_opts.temperature = opts.temperature;
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llama::InferenceOptions { temperature: opts.temperature, top_p: opts.top_p, top_k: opts.top_k, repeat_penalty: opts.repeat_penalty, repeat_last_n: opts.repeat_last_n, seed: opts.seed as u32, n_ctx: opts.context_size as u32, n_threads: opts.threads as u32, ..Default::default() }` and removing relevant reassignments
   --> src/server/mod.rs:341:13
    |
341 | ...   let mut inf_opts = crate::llama::InferenceOptions::default();
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> src/server/mod.rs:847:13
    |
847 | ...   inf_opts.repeat_penalty = opts.repeat_penalty;
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llama::InferenceOptions { repeat_penalty: opts.repeat_penalty, repeat_last_n: opts.repeat_last_n, seed: opts.seed as u32, n_ctx: opts.context_size as u32, n_threads: opts.threads as u32, n_predict: opts.num_predict, ..Default::default() }` and removing relevant reassignments
   --> src/server/mod.rs:846:13
    |
846 | ...   let mut inf_opts = crate::llama::InferenceOptions::default();
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#field_reassign_with_default

warning: field assignment outside of initializer for an instance created with Default::default()
   --> src/server/mod.rs:967:13
    |
967 | ...   inf_opts.temperature = opts.temperature;
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |
note: consider initializing the variable with `llama::InferenceOptions { temperature: opts.temperature, n_predict: opts.num_predict, ..Default::default() }` and removing relevant reassignments
   --> src/server/mod.rs:966:13
    |
966 | ...   let mut inf_opts = crate::llama::InferenceOptions::default();
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#field_reassign_with_default

warning: module has the same name as its containing module
  --> src/template/mod.rs:1:1
   |
 1 | / pub mod template {
 2 | |     use anyhow::Result;
 3 | |     use std::collections::HashMap;
...  |
62 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#module_inception

warning: module has the same name as its containing module
  --> src/sample/mod.rs:1:1
   |
 1 | / pub mod sample {
 2 | |     use rand::Rng;
 3 | |     
 4 | |     #[allow(dead_code)]
...  |
94 | | }
   | |_^
   |
   = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#module_inception

warning: clamp-like pattern without using clamp function
   --> src/discover.rs:250:5
    |
250 |     estimated_layers.max(0).min(99)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace with clamp: `estimated_layers.clamp(0, 99)`
    |
    = note: clamp will panic if max < min
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#manual_clamp
    = note: `#[warn(clippy::manual_clamp)]` on by default

warning: clamp-like pattern without using clamp function
   --> src/discover.rs:282:5
    |
282 |     ((typical_layers as f64 * ratio) as i32).max(0).min(99)
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace with clamp: `((typical_layers as f64 * ratio) as i32).clamp(0, 99)`
    |
    = note: clamp will panic if max < min
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#manual_clamp

warning: stripping a prefix manually
   --> src/harmony/mod.rs:155:40
    |
155 | ...   header.recipient = role[3..].to_string();
    |                          ^^^^^^^^^
    |
note: the prefix was tested here
   --> src/harmony/mod.rs:154:17
    |
154 |                 if role.starts_with("to=") {
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#manual_strip
    = note: `#[warn(clippy::manual_strip)]` on by default
help: try using the `strip_prefix` method
    |
154 ~                 if let Some(<stripped>) = role.strip_prefix("to=") {
155 ~                     header.recipient = <stripped>.to_string();
    |

warning: stripping a prefix manually
   --> src/harmony/mod.rs:172:40
    |
172 | ...   header.recipient = role[3..].to_string();
    |                          ^^^^^^^^^
    |
note: the prefix was tested here
   --> src/harmony/mod.rs:171:17
    |
171 |                 if role.starts_with("to=") {
    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = help: for further information visit https://rust-lang.github.io/rust-clippy/rust-1.93.0/index.html#manual_strip
help: try using the `strip_prefix` method
    |
171 ~                 if let Some(<stripped>) = role.strip_prefix("to=") {
172 ~                     header.recipient = <stripped>.to_string();
    |

warning: `ollama` (bin "ollama" test) generated 76 warnings
warning: `ollama` (bin "ollama") generated 76 warnings (76 duplicates)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 4.35s
