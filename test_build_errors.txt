warning: unused import: `crate::core::tensor::Shape`
 --> src/core/model/traits.rs:2:5
  |
2 | use crate::core::tensor::Shape;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `std::collections::HashMap`
 --> src/core/model/config.rs:2:5
  |
2 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> src/core/model/architectures/llama.rs:3:5
  |
3 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused import: `std::collections::HashMap`
  --> src/core/model/mod.rs:12:5
   |
12 | use std::collections::HashMap;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `Result`
  --> src/core/tokenizer/mod.rs:11:19
   |
11 | use crate::core::{Result, TokenId};
   |                   ^^^^^^

warning: unused import: `TokenId`
 --> src/core/cache/mod.rs:5:35
  |
5 | use crate::core::{Result, Tensor, TokenId};
  |                                   ^^^^^^^

warning: unused import: `DType`
 --> src/core/tensor/ops.rs:1:28
  |
1 | use super::{Tensor, Shape, DType};
  |                            ^^^^^

warning: unused import: `SeekFrom`
 --> src/infra/gguf/mod.rs:4:27
  |
4 | use std::io::{Read, Seek, SeekFrom};
  |                           ^^^^^^^^

warning: unused import: `GGML_MAX_DIMS`
 --> src/infra/ggml/backend.rs:1:23
  |
1 | use super::{GgmlType, GGML_MAX_DIMS};
  |                       ^^^^^^^^^^^^^

warning: unused import: `Device`
 --> src/infra/ggml/backend.rs:2:42
  |
2 | use crate::core::{Result, Tensor, DType, Device};
  |                                          ^^^^^^

warning: unused import: `CString`
 --> src/infra/ggml/backend.rs:4:24
  |
4 | use std::ffi::{c_void, CString};
  |                        ^^^^^^^

warning: unused import: `Result`
 --> src/infra/ggml/tensor.rs:1:19
  |
1 | use crate::core::{Result, Tensor};
  |                   ^^^^^^

warning: unused import: `extract::State`
 --> src/app/server/mod.rs:1:48
  |
1 | ... post}, Json, extract::State};
  |                  ^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> src/app/server/mod.rs:3:5
  |
3 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused import: `tokio::sync::RwLock`
 --> src/app/server/mod.rs:4:5
  |
4 | use tokio::sync::RwLock;
  |     ^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> src/app/runner/mod.rs:4:5
  |
4 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused imports: `AsyncCommand` and `CommandContext`
  --> src/app/commands/mod.rs:75:26
   |
75 | ...mmand, CommandContext, AsyncCommand, Result};
   |           ^^^^^^^^^^^^^^  ^^^^^^^^^^^^

warning: unused variable: `core_dtype`
  --> src/infra/ggml/backend.rs:30:13
   |
30 |         let core_dtype = match dtype {
   |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_core_dtype`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `tensor`
  --> src/infra/ggml/backend.rs:42:27
   |
42 | ...compute(&self, tensor: &mut Tensor) -> Res...
   |                   ^^^^^^ help: if this is intentional, prefix it with an underscore: `_tensor`

warning: variable does not need to be mutable
  --> src/app/runner/mod.rs:52:13
   |
52 | ...   let mut positions: Vec<usize> = (0..tok...
   |           ----^^^^^^^^^
   |           |
   |           help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: variable `current_pos` is assigned to, but never used
  --> src/app/runner/mod.rs:55:13
   |
55 |         let mut current_pos = tokens.len();
   |             ^^^^^^^^^^^^^^^
   |
   = note: consider using `_current_pos` instead

warning: value assigned to `current_pos` is never read
  --> src/app/runner/mod.rs:68:13
   |
68 |             current_pos += 1;
   |             ^^^^^^^^^^^^^^^^
   |
   = help: maybe it is overwritten before being read?
   = note: `#[warn(unused_assignments)]` (part of `#[warn(unused)]`) on by default

warning: field `scores` is never read
  --> src/core/tokenizer/sentencepiece.rs:10:5
   |
 6 | pub struct SentencePieceTokenizer {
   |            ---------------------- field in this struct
...
10 |     scores: HashMap<TokenId, f32>,
   |     ^^^^^^
   |
   = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: fields `layer_count`, `head_count`, and `head_dim` are never read
  --> src/core/cache/mod.rs:8:5
   |
 7 | pub struct CausalKVCache {
   |            ------------- fields in this struct
 8 |     layer_count: usize,
   |     ^^^^^^^^^^^
 9 |     head_count: usize,
   |     ^^^^^^^^^^
10 |     head_dim: usize,
   |     ^^^^^^^^

warning: field `backend` is never read
 --> src/infra/ggml/context.rs:6:5
  |
5 | pub struct GgmlContext {
  |            ----------- field in this struct
6 |     backend: GgmlBackend,
  |     ^^^^^^^

warning: method `as_f64` is never used
   --> src/gguf.rs:420:8
    |
390 | impl Value {
    | ---------- method in this implementation
...
420 |     fn as_f64(&self) -> Option<f64> {
    |        ^^^^^^

warning: unused import: `extract::State`
 --> src/app/server/mod.rs:1:48
  |
1 | ...t, post}, Json, extract::State};
  |                    ^^^^^^^^^^^^^^

warning: unused imports: `AsyncCommand` and `CommandContext`
  --> src/app/commands/mod.rs:75:26
   |
75 | ...Command, CommandContext, AsyncCommand, Result};
   |             ^^^^^^^^^^^^^^  ^^^^^^^^^^^^

warning: unused variable: `tensor`
  --> src/infra/ggml/backend.rs:42:27
   |
42 | ...compute(&self, tensor: &mut Tensor) -> Result<...
   |                   ^^^^^^ help: if this is intentional, prefix it with an underscore: `_tensor`

warning: variable does not need to be mutable
  --> src/app/runner/mod.rs:52:13
   |
52 | ...   let mut positions: Vec<usize> = (0..tokens....
   |           ----^^^^^^^^^
   |           |
   |           help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: `ollama` (lib) generated 26 warnings (run `cargo fix --lib -p ollama` to apply 20 suggestions)
warning: `ollama` (lib test) generated 26 warnings (22 duplicates) (run `cargo fix --lib -p ollama --tests` to apply 4 suggestions)
warning: unused imports: `Command` and `Stdio`
 --> src/bin/runner.rs:4:20
  |
4 | use std::process::{Command, Stdio};
  |                    ^^^^^^^  ^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: variable does not need to be mutable
  --> src/bin/runner.rs:55:9
   |
55 |     let mut tokenizer = GgufTokenizer::new(gg...
   |         ----^^^^^^^^^
   |         |
   |         help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `vocab_size`
  --> src/bin/runner.rs:54:9
   |
54 |     let vocab_size = gguf.metadata.vocab_size...
   |         ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_vocab_size`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `i`
   --> src/bin/runner.rs:204:14
    |
204 |         for (i, &token) in tokens.iter().enu...
    |              ^ help: if this is intentional, prefix it with an underscore: `_i`

warning: unused variable: `tokenizer`
   --> src/bin/runner.rs:220:105
    |
220 | ...kens: usize, tokenizer: &GgufTokenizer) -...
    |                 ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_tokenizer`

warning: field `vocab_scores` is never read
   --> src/bin/runner.rs:140:5
    |
138 | struct GgufTokenizer {
    |        ------------- field in this struct
139 |     vocab: Vec<String>,
140 |     vocab_scores: Vec<f32>,
    |     ^^^^^^^^^^^^
    |
    = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: method `decode` is never used
   --> src/bin/runner.rs:188:8
    |
145 | impl GgufTokenizer {
    | ------------------ method in this implementation
...
188 |     fn decode(&self, tokens: &[i32]) -> Stri...
    |        ^^^^^^

warning: unused import: `types::*`
 --> src/api/mod.rs:7:9
  |
7 | pub use types::*;
  |         ^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused import: `anyhow`
 --> src/llama.rs:1:28
  |
1 | use anyhow::{bail, Result, anyhow};
  |                            ^^^^^^

warning: unused import: `Tensor`
 --> src/llama.rs:2:27
  |
2 | use candle_core::{Device, Tensor};
  |                           ^^^^^^

warning: unused import: `half::f16`
 --> src/llama.rs:5:5
  |
5 | use half::f16;
  |     ^^^^^^^^^

warning: variable does not need to be mutable
   --> src/models.rs:679:9
    |
679 |         mut progress: F,
    |         ----^^^^^^^^
    |         |
    |         help: remove this `mut`
    |
    = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: variable does not need to be mutable
   --> src/llama.rs:114:13
    |
114 | ...   let mut logits_processor = LogitsProcessor...
    |           ----^^^^^^^^^^^^^^^^
    |           |
    |           help: remove this `mut`

warning: unused variable: `prompt`
   --> src/llama.rs:105:35
    |
105 | ...<F>(&mut self, prompt: &str, mut callback: F)...
    |                   ^^^^^^ help: if this is intentional, prefix it with an underscore: `_prompt`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `model`
   --> src/llama.rs:113:13
    |
113 |         let model = self.model.as_mut().unwrap();
    |             ^^^^^ help: if this is intentional, prefix it with an underscore: `_model`

warning: unused variable: `logits_processor`
   --> src/llama.rs:114:13
    |
114 |         let mut logits_processor = LogitsProcess...
    |             ^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_logits_processor`

warning: struct `Time` is never constructed
 --> src/api/types.rs:5:12
  |
5 | pub struct Time {
  |            ^^^^
  |
  = note: `#[warn(dead_code)]` (part of `#[warn(unused)]`) on by default

warning: associated functions `new` and `from_timestamp` are never used
  --> src/api/types.rs:11:12
   |
10 | impl Time {
   | --------- associated functions in this implementation
11 |     pub fn new() -> Self {
   |            ^^^
...
15 |     pub fn from_timestamp(ts: i64) -> Self {
   |            ^^^^^^^^^^^^^^

warning: struct `ToolFunction` is never constructed
  --> src/api/types.rs:27:12
   |
27 | pub struct ToolFunction {
   |            ^^^^^^^^^^^^

warning: struct `ToolCall` is never constructed
  --> src/api/types.rs:35:12
   |
35 | pub struct ToolCall {
   |            ^^^^^^^^

warning: struct `File` is never constructed
  --> src/api/types.rs:42:12
   |
42 | pub struct File {
   |            ^^^^

warning: struct `Attachment` is never constructed
  --> src/api/types.rs:48:12
   |
48 | pub struct Attachment {
   |            ^^^^^^^^^^

warning: struct `Message` is never constructed
  --> src/api/types.rs:55:12
   |
55 | pub struct Message {
   |            ^^^^^^^

warning: struct `Chat` is never constructed
  --> src/api/types.rs:85:12
   |
85 | pub struct Chat {
   |            ^^^^

warning: struct `ChatInfo` is never constructed
  --> src/api/types.rs:96:12
   |
96 | pub struct ChatInfo {
   |            ^^^^^^^^

warning: struct `ChatsResponse` is never constructed
   --> src/api/types.rs:105:12
    |
105 | pub struct ChatsResponse {
    |            ^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:111:12
    |
110 | impl ChatsResponse {
    | ------------------ associated function in this implementation
111 |     pub fn new() -> Self {
    |            ^^^

warning: struct `ChatResponse` is never constructed
   --> src/api/types.rs:125:12
    |
125 | pub struct ChatResponse {
    |            ^^^^^^^^^^^^

warning: struct `Model` is never constructed
   --> src/api/types.rs:130:12
    |
130 | pub struct Model {
    |            ^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:140:12
    |
139 | impl Model {
    | ---------- associated function in this implementation
140 |     pub fn new(model: impl Into<String>) -> Self {
    |            ^^^

warning: struct `ModelsResponse` is never constructed
   --> src/api/types.rs:150:12
    |
150 | pub struct ModelsResponse {
    |            ^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:156:12
    |
155 | impl ModelsResponse {
    | ------------------- associated function in this implementation
156 |     pub fn new() -> Self {
    |            ^^^

warning: struct `InferenceCompute` is never constructed
   --> src/api/types.rs:168:12
    |
168 | pub struct InferenceCompute {
    |            ^^^^^^^^^^^^^^^^

warning: struct `InferenceComputeResponse` is never constructed
   --> src/api/types.rs:178:12
    |
178 | pub struct InferenceComputeResponse {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:186:12
    |
185 | impl InferenceComputeResponse {
    | ----------------------------- associated function in this implementation
186 |     pub fn new() -> Self {
    |            ^^^

warning: struct `ModelCapabilitiesResponse` is never constructed
   --> src/api/types.rs:201:12
    |
201 | pub struct ModelCapabilitiesResponse {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: associated functions `new` and `with_capabilities` are never used
   --> src/api/types.rs:207:12
    |
206 | impl ModelCapabilitiesResponse {
    | ------------------------------ associated functions in this implementation
207 |     pub fn new() -> Self {
    |            ^^^
...
213 |     pub fn with_capabilities(capabilities: Vec<S...
    |            ^^^^^^^^^^^^^^^^^

warning: enum `ChatEventName` is never used
   --> src/api/types.rs:226:10
    |
226 | pub enum ChatEventName {
    |          ^^^^^^^^^^^^^

warning: struct `ChatEvent` is never constructed
   --> src/api/types.rs:239:12
    |
239 | pub struct ChatEvent {
    |            ^^^^^^^^^

warning: struct `DownloadEvent` is never constructed
   --> src/api/types.rs:267:12
    |
267 | pub struct DownloadEvent {
    |            ^^^^^^^^^^^^^

warning: struct `ErrorEvent` is never constructed
   --> src/api/types.rs:276:12
    |
276 | pub struct ErrorEvent {
    |            ^^^^^^^^^^

warning: struct `Settings` is never constructed
   --> src/api/types.rs:287:12
    |
287 | pub struct Settings {
    |            ^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:319:12
    |
318 | impl Settings {
    | ------------- associated function in this implementation
319 |     pub fn new() -> Self {
    |            ^^^

warning: struct `SettingsResponse` is never constructed
   --> src/api/types.rs:346:12
    |
346 | pub struct SettingsResponse {
    |            ^^^^^^^^^^^^^^^^

warning: struct `HealthResponse` is never constructed
   --> src/api/types.rs:351:12
    |
351 | pub struct HealthResponse {
    |            ^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:356:12
    |
355 | impl HealthResponse {
    | ------------------- associated function in this implementation
356 |     pub fn new(healthy: bool) -> Self {
    |            ^^^

warning: struct `User` is never constructed
   --> src/api/types.rs:362:12
    |
362 | pub struct User {
    |            ^^^^

warning: struct `ChatRequest` is never constructed
   --> src/api/types.rs:379:12
    |
379 | pub struct ChatRequest {
    |            ^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:397:12
    |
396 | impl ChatRequest {
    | ---------------- associated function in this implementation
397 |     pub fn new(model: impl Into<String>, prompt:...
    |            ^^^

warning: struct `Error` is never constructed
   --> src/api/types.rs:412:12
    |
412 | pub struct Error {
    |            ^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:417:12
    |
416 | impl Error {
    | ---------- associated function in this implementation
417 |     pub fn new(error: impl Into<String>) -> Self {
    |            ^^^

warning: struct `ModelUpstreamResponse` is never constructed
   --> src/api/types.rs:425:12
    |
425 | pub struct ModelUpstreamResponse {
    |            ^^^^^^^^^^^^^^^^^^^^^

warning: struct `Page` is never constructed
   --> src/api/types.rs:434:12
    |
434 | pub struct Page {
    |            ^^^^

warning: struct `BrowserStateData` is never constructed
   --> src/api/types.rs:447:12
    |
447 | pub struct BrowserStateData {
    |            ^^^^^^^^^^^^^^^^

warning: struct `CloudStatusResponse` is never constructed
   --> src/api/types.rs:458:12
    |
458 | pub struct CloudStatusResponse {
    |            ^^^^^^^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:464:12
    |
463 | impl CloudStatusResponse {
    | ------------------------ associated function in this implementation
464 |     pub fn new(disabled: bool, source: impl Into...
    |            ^^^

warning: struct `SettingsState` is never constructed
   --> src/api/types.rs:474:12
    |
474 | pub struct SettingsState {
    |            ^^^^^^^^^^^^^

warning: associated functions `new` and `from_settings` are never used
   --> src/api/types.rs:497:12
    |
496 | impl SettingsState {
    | ------------------ associated functions in this implementation
497 |     pub fn new() -> Self {
    |            ^^^
...
501 |     pub fn from_settings(settings: &Settings) ->...
    |            ^^^^^^^^^^^^^

warning: struct `SettingsUpdate` is never constructed
   --> src/api/types.rs:515:12
    |
515 | pub struct SettingsUpdate {
    |            ^^^^^^^^^^^^^^

warning: struct `BatcherConfig` is never constructed
   --> src/api/types.rs:532:12
    |
532 | pub struct BatcherConfig {
    |            ^^^^^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:549:12
    |
548 | impl BatcherConfig {
    | ------------------ associated function in this implementation
549 |     pub fn new() -> Self {
    |            ^^^

warning: struct `ImageData` is never constructed
   --> src/api/types.rs:556:12
    |
556 | pub struct ImageData {
    |            ^^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:563:12
    |
562 | impl ImageData {
    | -------------- associated function in this implementation
563 |     pub fn new(filename: impl Into<String>, path...
    |            ^^^

warning: struct `MenuItem` is never constructed
   --> src/api/types.rs:574:12
    |
574 | pub struct MenuItem {
    |            ^^^^^^^^

warning: associated function `new` is never used
   --> src/api/types.rs:583:12
    |
582 | impl MenuItem {
    | ------------- associated function in this implementation
583 |     pub fn new(label: impl Into<String>) -> Self {
    |            ^^^

warning: struct `UseMessageAutoscrollOptions` is never constructed
   --> src/api/types.rs:594:12
    |
594 | pub struct UseMessageAutoscrollOptions {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `MessageAutoscrollBehavior` is never constructed
   --> src/api/types.rs:602:12
    |
602 | pub struct MessageAutoscrollBehavior {
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `ModelConfig` is never constructed
  --> src/models.rs:93:12
   |
93 | pub struct ModelConfig {
   |            ^^^^^^^^^^^

warning: fields `client`, `num_threads`, and `chunk_size` are never read
  --> src/downloader.rs:13:5
   |
12 | pub struct Downloader {
   |            ---------- fields in this struct
13 |     client: Client,
   |     ^^^^^^
14 |     num_threads: usize,
   |     ^^^^^^^^^^^
15 |     chunk_size: u64,
   |     ^^^^^^^^^^

warning: multiple associated items are never used
   --> src/downloader.rs:20:12
    |
 19 | impl Downloader {
    | --------------- associated items in this implementation
 20 |     pub fn new(num_threads: usize, chunk_size: u...
    |            ^^^
...
 35 |     fn aria2c_available() -> bool {
    |        ^^^^^^^^^^^^^^^^
...
 43 |     pub async fn download<F>(
    |                  ^^^^^^^^
...
 60 |     async fn download_with_aria2c<F>(
    |              ^^^^^^^^^^^^^^^^^^^^
...
110 |     async fn get_file_size(&self, url: &str) -> ...
    |              ^^^^^^^^^^^^^
...
123 |     async fn download_native<F>(
    |              ^^^^^^^^^^^^^^^
...
247 |     async fn verify_digest(&self, path: &Path, e...
    |              ^^^^^^^^^^^^^

warning: field `stop` is never read
  --> src/llama.rs:19:9
   |
 9 | pub struct InferenceOptions {
   |            ---------------- field in this struct
...
19 |     pub stop: Vec<String>,
   |         ^^^^
   |
   = note: `InferenceOptions` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis

warning: method `unload` is never used
   --> src/llama.rs:138:12
    |
 59 | impl LlamaEngine {
    | ---------------- method in this implementation
...
138 |     pub fn unload(&mut self) {
    |            ^^^^^^

warning: methods `remove` and `list_running` are never used
   --> src/llama.rs:172:12
    |
148 | impl LlamaEngineCache {
    | --------------------- methods in this implementation
...
172 |     pub fn remove(&mut self, name: &str) {
    |            ^^^^^^
...
176 |     pub fn list_running(&self) -> Vec<String> {
    |            ^^^^^^^^^^^^

warning: enum `ParserState` is never used
 --> src/harmony/mod.rs:4:10
  |
4 | pub enum ParserState {
  |          ^^^^^^^^^^^

warning: struct `Header` is never constructed
  --> src/harmony/mod.rs:21:12
   |
21 | pub struct Header {
   |            ^^^^^^

warning: enum `Event` is never used
  --> src/harmony/mod.rs:28:10
   |
28 | pub enum Event {
   |          ^^^^^

warning: struct `Parser` is never constructed
  --> src/harmony/mod.rs:35:12
   |
35 | pub struct Parser {
   |            ^^^^^^

warning: associated items `new`, `add_implicit_start`, `add_content`, `eat`, `parse_header`, and `overlap` are never used
   --> src/harmony/mod.rs:44:12
    |
 43 | impl Parser {
    | ----------- associated items in this implementation
 44 |     pub fn new() -> Self {
    |            ^^^
...
 54 |     pub fn add_implicit_start(&mut self) {
    |            ^^^^^^^^^^^^^^^^^^
...
 58 |     pub fn add_content(&mut self, content: &str)...
    |            ^^^^^^^^^^^
...
 73 |     fn eat(&mut self) -> (Vec<Event>, bool) {
    |        ^^^
...
131 |     fn parse_header(&self, raw: &str) -> Header {
    |        ^^^^^^^^^^^^
...
183 |     fn overlap(s: &str, delim: &str) -> usize {
    |        ^^^^^^^

warning: struct `FunctionNameMap` is never constructed
   --> src/harmony/mod.rs:200:12
    |
200 | pub struct FunctionNameMap {
    |            ^^^^^^^^^^^^^^^

warning: associated items `new`, `convert_and_add`, `original_from_converted`, `convert_to_valid_chars`, and `derive_name` are never used
   --> src/harmony/mod.rs:206:12
    |
205 | impl FunctionNameMap {
    | -------------------- associated items in this implementation
206 |     pub fn new() -> Self {
    |            ^^^
...
213 |     pub fn convert_and_add(&mut self, user_funct...
    |            ^^^^^^^^^^^^^^^
...
220 |     pub fn original_from_converted(&self, harmon...
    |            ^^^^^^^^^^^^^^^^^^^^^^^
...
226 |     fn convert_to_valid_chars(&self, name: &str)...
    |        ^^^^^^^^^^^^^^^^^^^^^^
...
247 |     fn derive_name(&self, user_function_name: &s...
    |        ^^^^^^^^^^^

warning: variable does not need to be mutable
  --> src/bin/runner.rs:55:9
   |
55 |     let mut tokenizer = GgufTokenizer::new(gguf);
   |         ----^^^^^^^^^
   |         |
   |         help: remove this `mut`
   |
   = note: `#[warn(unused_mut)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `vocab_size`
  --> src/bin/runner.rs:54:9
   |
54 |     let vocab_size = gguf.metadata.vocab_size as ...
   |         ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_vocab_size`
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: unused variable: `i`
   --> src/bin/runner.rs:204:14
    |
204 |         for (i, &token) in tokens.iter().enumera...
    |              ^ help: if this is intentional, prefix it with an underscore: `_i`

warning: unused variable: `tokenizer`
   --> src/bin/runner.rs:220:105
    |
220 | ...tokens: usize, tokenizer: &GgufTokenizer) -> ...
    |                   ^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_tokenizer`

warning: method `decode` is never used
   --> src/bin/runner.rs:188:8
    |
145 | impl GgufTokenizer {
    | ------------------ method in this implementation
...
188 |     fn decode(&self, tokens: &[i32]) -> String {
    |        ^^^^^^

   Compiling ollama v0.5.0 (/home/lemoreira/git/integracoes/ollama)
warning: `ollama` (bin "runner") generated 7 warnings (run `cargo fix --bin "runner" -p ollama` to apply 5 suggestions)
warning: `ollama` (bin "ollama") generated 73 warnings (run `cargo fix --bin "ollama" -p ollama` to apply 9 suggestions)
warning: `ollama` (bin "runner" test) generated 7 warnings (2 duplicates) (run `cargo fix --bin "runner" -p ollama --tests` to apply 4 suggestions)
warning: `ollama` (bin "ollama" test) generated 73 warnings (73 duplicates)
error[E0432]: unresolved import `ollama::tokenizer`
 --> tests/integration_tests.rs:5:21
  |
5 | ...   use ollama::tokenizer::{BytePairEncoding, Vo...
  |                   ^^^^^^^^^ could not find `tokenizer` in `ollama`

error[E0432]: unresolved import `ollama::tokenizer`
  --> tests/integration_tests.rs:26:21
   |
26 | ...   use ollama::tokenizer::{SentencePiece, Voca...
   |                   ^^^^^^^^^ could not find `tokenizer` in `ollama`

error[E0432]: unresolved import `ollama::tokenizer`
  --> tests/integration_tests.rs:47:21
   |
47 | ...   use ollama::tokenizer::{WordPiece, Vocabula...
   |                   ^^^^^^^^^ could not find `tokenizer` in `ollama`

error[E0432]: unresolved import `ollama::model::nn`
  --> tests/integration_tests.rs:71:28
   |
71 |         use ollama::model::nn::Tensor;
   |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
  --> tests/integration_tests.rs:80:28
   |
80 |         use ollama::model::nn::Tensor;
   |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
  --> tests/integration_tests.rs:90:28
   |
90 |         use ollama::model::nn::Tensor;
   |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:101:28
    |
101 |         use ollama::model::nn::Tensor;
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:112:28
    |
112 |         use ollama::model::nn::Tensor;
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:121:28
    |
121 |         use ollama::model::nn::Tensor;
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:130:28
    |
130 |         use ollama::model::nn::Tensor;
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:142:28
    |
142 |         use ollama::model::nn::{Embedding, Tensor};
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:160:28
    |
160 |         use ollama::model::nn::{Linear, Tensor};
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::nn`
   --> tests/integration_tests.rs:174:28
    |
174 |         use ollama::model::nn::{RMSNorm, Tensor};
    |                            ^^ could not find `nn` in `model`

error[E0432]: unresolved import `ollama::model::Config`
   --> tests/integration_tests.rs:191:13
    |
191 |         use ollama::model::Config;
    |             ^^^^^^^^^^^^^^^^^^^^^ no `Config` in `model`
    |
help: a similar name exists in the module (notice the capitalization)
    |
191 -         use ollama::model::Config;
191 +         use ollama::model::config;
    |
help: consider importing one of these items instead
    |
191 -         use ollama::model::Config;
191 +         use base64::engine::Config;
    |
191 -         use ollama::model::Config;
191 +         use candle_transformers::models::based::Config;
    |
191 -         use ollama::model::Config;
191 +         use candle_transformers::models::bert::Config;
    |
191 -         use ollama::model::Config;
191 +         use candle_transformers::models::bigcode::Config;
    |
    = and 82 other candidates

error[E0432]: unresolved imports `ollama::model::Config`, `ollama::model::GgufValue`
   --> tests/integration_tests.rs:203:29
    |
203 |         use ollama::model::{Config, GgufValue};
    |                             ^^^^^^  ^^^^^^^^^ no `GgufValue` in `model`
    |                             |
    |                             no `Config` in `model`
    |                             help: a similar name exists in the module (notice the capitalization): `config`
    |
    = help: consider importing one of these items instead:
            base64::engine::Config
            candle_transformers::models::based::Config
            candle_transformers::models::bert::Config
            candle_transformers::models::bigcode::Config
            candle_transformers::models::blip::Config
            candle_transformers::models::blip_text::Config
            candle_transformers::models::chatglm::Config
            candle_transformers::models::codegeex4_9b::Config
            candle_transformers::models::convnext::Config
            candle_transformers::models::csm::Config
            candle_transformers::models::dac::Config
            candle_transformers::models::debertav2::Config
            candle_transformers::models::distilbert::Config
            candle_transformers::models::efficientvit::Config
            candle_transformers::models::encodec::Config
            candle_transformers::models::falcon::Config
            candle_transformers::models::fastvit::Config
            candle_transformers::models::flux::autoencoder::Config
            candle_transformers::models::flux::model::Config
            candle_transformers::models::gemma2::Config
            candle_transformers::models::gemma3::Config
            candle_transformers::models::gemma::Config
            candle_transformers::models::glm4::Config
            candle_transformers::models::glm4_new::Config
            candle_transformers::models::granite::Config
            candle_transformers::models::helium::Config
            candle_transformers::models::hiera::Config
            candle_transformers::models::jina_bert::Config
            candle_transformers::models::llama2_c::Config
            candle_transformers::models::llama::Config
            candle_transformers::models::mamba2::Config
            candle_transformers::models::mamba::Config
            candle_transformers::models::marian::Config
            candle_transformers::models::metavoice::gpt::Config
            candle_transformers::models::metavoice::speaker_encoder::Config
            candle_transformers::models::metavoice::transformer::Config
            candle_transformers::models::mimi::Config
            candle_transformers::models::mimi::seanet::Config
            candle_transformers::models::mimi::transformer::Config
            candle_transformers::models::mixtral::Config
            candle_transformers::models::mmdit::model::Config
            candle_transformers::models::mobilenetv4::Config
            candle_transformers::models::mobileone::Config
            candle_transformers::models::modernbert::Config
            candle_transformers::models::moondream::Config
            candle_transformers::models::olmo2::Config
            candle_transformers::models::olmo::Config
            candle_transformers::models::openclip::text_model::Config
            candle_transformers::models::paddleocr_vl::Config
            candle_transformers::models::paligemma::Config
            candle_transformers::models::parler_tts::Config
            candle_transformers::models::persimmon::Config
            candle_transformers::models::phi3::Config
            candle_transformers::models::phi::Config
            candle_transformers::models::pixtral::Config
            candle_transformers::models::pixtral::vision_model::Config
            candle_transformers::models::quantized_blip::Config
            candle_transformers::models::quantized_blip_text::Config
            candle_transformers::models::quantized_mistral::Config
            candle_transformers::models::quantized_mixformer::Config
            candle_transformers::models::quantized_mpt::Config
            candle_transformers::models::quantized_t5::Config
            candle_transformers::models::qwen2::Config
            candle_transformers::models::qwen2_moe::Config
            candle_transformers::models::qwen3::Config
            candle_transformers::models::qwen3_moe::Config
            candle_transformers::models::qwen3_vl::Config
            candle_transformers::models::recurrent_gemma::Config
            candle_transformers::models::repvgg::Config
            candle_transformers::models::rwkv_v6::Config
            candle_transformers::models::segformer::Config
            candle_transformers::models::siglip::Config
            candle_transformers::models::smol::smollm3::Config
            candle_transformers::models::snac::Config
            candle_transformers::models::stable_diffusion::clip::Config
            candle_transformers::models::stable_lm::Config
            candle_transformers::models::starcoder2::Config
            candle_transformers::models::stella_en_v5::Config
            candle_transformers::models::t5::Config
            candle_transformers::models::vit::Config
            candle_transformers::models::whisper::Config
            candle_transformers::models::xlm_roberta::Config
            candle_transformers::models::yi::Config
            candle_transformers::models::z_image::Config
            notify::Config
            rustyline::Config

error[E0432]: unresolved import `ollama::model::input`
   --> tests/integration_tests.rs:236:28
    |
236 |         use ollama::model::input::Batch;
    |                            ^^^^^ could not find `input` in `model`

error[E0432]: unresolved import `ollama::model::input`
   --> tests/integration_tests.rs:245:28
    |
245 |         use ollama::model::input::Batch;
    |                            ^^^^^ could not find `input` in `model`

error[E0432]: unresolved import `ollama::convert`
   --> tests/integration_tests.rs:277:21
    |
277 |         use ollama::convert::ModelConfig;
    |                     ^^^^^^^ could not find `convert` in `ollama`

error[E0432]: unresolved import `ollama::model::Config`
   --> tests/integration_tests.rs:309:13
    |
309 |         use ollama::model::Config;
    |             ^^^^^^^^^^^^^^^^^^^^^ no `Config` in `model`
    |
help: a similar name exists in the module (notice the capitalization)
    |
309 -         use ollama::model::Config;
309 +         use ollama::model::config;
    |
help: consider importing one of these items instead
    |
309 -         use ollama::model::Config;
309 +         use base64::engine::Config;
    |
309 -         use ollama::model::Config;
309 +         use candle_transformers::models::based::Config;
    |
309 -         use ollama::model::Config;
309 +         use candle_transformers::models::bert::Config;
    |
309 -         use ollama::model::Config;
309 +         use candle_transformers::models::bigcode::Config;
    |
    = and 82 other candidates

For more information about this error, try `rustc --explain E0432`.
error: could not compile `ollama` (test "integration_tests") due to 19 previous errors
